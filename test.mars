
type User = {
	name: string
	posts: [Post]
}

type Post = {
	body: string
	author: User
}

function add_post(author: User, body: string) {
	let post: Post = { body, author }
	author.posts.push(post)
}

function main() {
	let user: User = {
		name = "john"
		posts = []
	}

	add_post(user, "hello world")
	add_post(user, "lorem ipsum")

	user.posts.iter(function(post) {
		writeline(post.author.name)
		writeline(post.body)
		writeline('')
	})

}
