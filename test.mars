
let Thing = function () => none

let const Box = function(val) {
	let box = {
		contained = none

		to_string = function() => 'box [#{self.contained}]'

		equals = function(other) => self.contained == other.contained
	}

	box.contained = Thing(val, box)

	return box
}

Thing = function(val, container) => {
	val, container

	to_new_box = function() {
		return Box(self.val)
	}

	to_string = function() => '#{val}'

	equals = function(other) => self.val == other.val
}

let box = Box(9)

let new_box = box.contained.to_new_box()

writeline(box == box)
